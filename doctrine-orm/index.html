<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Doctrine</title>
    <link rel="stylesheet" media="print" href="themes/nagasaki/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="themes/nagasaki/css/screen.css">
    
    <link rel="stylesheet" href="css/solarized.css">
    
    <link rel="stylesheet" href="css/custom.css">
    
    <link rel="stylesheet" href="css/doctrine-orm.css">
    
    <script type="text/javascript" src="themes/nagasaki/js/slides.js"></script>
    
</head>
<body>
<div id="blank"></div>
<div class="presentation">
    <div id="time">
        <span id="hours">00</span>:<span id="minutes">00</span>:<span id="seconds">00</span>
    </div>
    <div id="current_presenter_notes">
        <div id="presenter_note"></div>
    </div>
    <div class="slides">
        
        <!-- slide source: src/doctrine-orm/title.md -->
        <div class="slide-wrapper">
            <div class="slide">
                <div class="inner">
                    
                    <header><h1>Doctrine</h1></header>
                    
                    
                    <section><h2>Because We're Softare Developers</h2>
<p><img alt="" src="src/doctrine-orm/images/doctrine-logo.png" /></p>
<p>Kristopher Wilson / @mrkrstphr</p></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/title.md">src/doctrine-orm/title.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        1/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/me.md -->
        <div class="slide-wrapper">
            <div class="slide">
                <div class="inner">
                    
                    <header><h1>Kristopher Wilson</h1></header>
                    
                    
                    <section><h2>I Make PHP Things</h2>
<p><img alt="" src="src/images/me.png" /></p>
<h3>Twitter: <a href="https://twitter.com/mrkrstphr">@mrkrstphr</a></h3>
<h3>GitHub: <a href="https://github.com/mrkrstphr">mrkrstphr</a></h3>
<h3>Rants: <a href="http://kristopherwilson.com">kristopherwilson.com</a></h3></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/me.md">src/me.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        2/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Queries Kind of Suck</h1></header>
                    
                    
                    <section><div class="highlight"><pre><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">orders</span> <span class="n">o</span>
<span class="k">JOIN</span> <span class="n">customers</span> <span class="k">c</span> <span class="k">ON</span> <span class="k">c</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">customer_id</span>
<span class="k">JOIN</span> <span class="n">invoices</span> <span class="n">i</span> <span class="k">ON</span> <span class="n">i</span><span class="p">.</span><span class="n">order_id</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">id</span>
<span class="k">JOIN</span> <span class="n">employees</span> <span class="n">rep</span> <span class="k">ON</span> <span class="n">rep</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="k">c</span><span class="p">.</span><span class="n">sales_rep_id</span>
<span class="k">WHERE</span> <span class="n">o</span><span class="p">.</span><span class="n">due_date</span> <span class="o">&lt;=</span> <span class="n">now</span><span class="p">()</span>
<span class="k">AND</span> <span class="n">o</span><span class="p">.</span><span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span><span class="p">;</span>
</pre></div>
</section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        3/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide">
                <div class="inner">
                    
                    <header><h1>Queries Kind of Suck</h1></header>
                    
                    
                    <section><p><img alt="" src="src/doctrine-orm/images/aint-nobody-got-time-for-that.gif" /></p></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        4/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Some People Kind of Suck at Queries</h1></header>
                    
                    
                    <section><div class="highlight"><pre><span class="k">SELECT</span> <span class="k">DISTINCT</span>
    <span class="n">q</span><span class="p">.</span><span class="n">parent_agent_company_id</span><span class="p">,</span> <span class="k">c</span><span class="p">.</span><span class="n">agent_company</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">agent_company_id</span><span class="p">,</span>
    <span class="n">q</span><span class="p">.</span><span class="n">circuit_id</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">mrc</span><span class="p">,</span>
    <span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">chargebacks</span><span class="p">.</span><span class="n">mrc</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="n">q</span><span class="p">.</span><span class="n">mrc</span> <span class="o">+</span> <span class="n">chargebacks</span><span class="p">.</span><span class="n">mrc</span>
        <span class="k">ELSE</span> <span class="n">q</span><span class="p">.</span><span class="n">mrc</span> <span class="k">END</span> <span class="k">AS</span> <span class="n">mrc</span><span class="p">,</span>
    <span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">chargebacks</span><span class="p">.</span><span class="n">mrc</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="n">chargebacks</span><span class="p">.</span><span class="n">mrc</span>
        <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span> <span class="k">AS</span> <span class="n">chargeback_amount</span><span class="p">,</span>
    <span class="n">q</span><span class="p">.</span><span class="n">account_id</span><span class="p">,</span> <span class="n">agents</span><span class="p">.</span><span class="n">is_account_past_due</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">account_id</span><span class="p">),</span> <span class="n">q</span><span class="p">.</span><span class="n">expected_mrc</span><span class="p">,</span>
    <span class="n">q</span><span class="p">.</span><span class="n">bill_start_date</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">om_customer_nm</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">order_type_cd</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">base_order_id</span><span class="p">,</span>
    <span class="n">q</span><span class="p">.</span><span class="n">service_type_cd</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">service_bandwidth_bps</span><span class="p">,</span>
    <span class="n">q</span><span class="p">.</span><span class="n">customer_nm</span><span class="p">,</span> <span class="n">u</span><span class="p">.</span><span class="n">last_nm</span> <span class="o">||</span> <span class="s1">&#39;, &#39;</span> <span class="o">||</span> <span class="n">u</span><span class="p">.</span><span class="n">first_nm</span> <span class="k">as</span> <span class="n">channel_manager_nm</span><span class="p">,</span>
    <span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">agents</span><span class="p">.</span><span class="n">is_upfront_blocked</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">base_order_id</span><span class="p">)</span> <span class="k">THEN</span> <span class="k">true</span>
        <span class="k">ELSE</span> <span class="k">false</span> <span class="k">END</span> <span class="k">AS</span> <span class="n">block_upfront</span><span class="p">,</span>
    <span class="n">q</span><span class="p">.</span><span class="n">expected_nrc</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">product_cd</span>
<span class="k">FROM</span> <span class="p">(</span>
    <span class="k">SELECT</span>
        <span class="n">q</span><span class="p">.</span><span class="n">circuit_id</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">mrc</span><span class="p">,</span><span class="n">q</span><span class="p">.</span><span class="n">expected_mrc</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">expected_nrc</span><span class="p">,</span>
        <span class="n">bo</span><span class="p">.</span><span class="n">bill_start_date</span><span class="p">,</span> <span class="n">bo</span><span class="p">.</span><span class="n">order_submitted</span><span class="p">,</span> <span class="n">bo</span><span class="p">.</span><span class="n">order_type_cd</span><span class="p">,</span>
        <span class="n">bo</span><span class="p">.</span><span class="n">service_type_cd</span><span class="p">,</span> <span class="n">omc</span><span class="p">.</span><span class="n">om_customer_nm</span><span class="p">,</span> <span class="n">ac</span><span class="p">.</span><span class="n">agent_company_id</span><span class="p">,</span>
        <span class="n">bo</span><span class="p">.</span><span class="n">base_order_id</span><span class="p">,</span> <span class="n">bo</span><span class="p">.</span><span class="n">term_cd</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">customer_nm</span>
    <span class="k">FROM</span> <span class="p">(</span>
        <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">crm</span><span class="p">.</span><span class="n">billing_snapshot</span>
        <span class="k">WHERE</span> <span class="n">statement_date</span> <span class="o">=</span> <span class="s1">&#39;2012-12-01&#39;</span>
    <span class="p">)</span> <span class="n">q</span>
    <span class="k">JOIN</span> <span class="n">om</span><span class="p">.</span><span class="ss">&quot;BASE_ORDERS&quot;</span> <span class="n">bo</span> <span class="k">ON</span> <span class="n">q</span><span class="p">.</span><span class="n">circuit_id</span> <span class="o">=</span> <span class="n">bo</span><span class="p">.</span><span class="n">uss_circuit_id</span>
</pre></div>

<p>This is an actual production query that runs on for about 6 more pages...</p></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        5/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Personally, I Like Objects</h1></header>
                    
                    
                    <section><div class="highlight"><pre><span class="nv">$orders</span> <span class="o">=</span> <span class="nv">$repository</span><span class="o">-&gt;</span><span class="na">getOverDueOrders</span><span class="p">();</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$orders</span> <span class="k">as</span> <span class="nv">$order</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$parcelFactory</span><span class="o">-&gt;</span><span class="na">createParcels</span><span class="p">(</span><span class="nv">$order</span><span class="p">);</span>
    <span class="nv">$order</span><span class="o">-&gt;</span><span class="na">markOrderShipped</span><span class="p">();</span>

    <span class="nv">$messenger</span><span class="o">-&gt;</span><span class="na">notifyShipment</span><span class="p">(</span>
       <span class="nv">$order</span><span class="p">,</span>
       <span class="k">new</span> <span class="nx">EmailNotifier</span><span class="p">()</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="nv">$repository</span><span class="o">-&gt;</span><span class="na">flush</span><span class="p">();</span>
</pre></div>
</section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        6/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Personally, I Like Objects</h1></header>
                    
                    
                    <section><div class="highlight"><pre><span class="nv">$customer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Customer</span><span class="p">();</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">setSalesRep</span><span class="p">(</span><span class="nx">Auth</span><span class="o">::</span><span class="na">getUser</span><span class="p">());</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">setCreditLimit</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
<span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">getAddresses</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span>
    <span class="p">(</span><span class="k">new</span> <span class="nx">Address</span><span class="p">())</span>
        <span class="o">-&gt;</span><span class="na">setStreet</span><span class="p">(</span><span class="s1">&#39;123 AnyStreet&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">setCity</span><span class="p">(</span><span class="s1">&#39;Grand Rapids&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">setState</span><span class="p">(</span><span class="s1">&#39;MI&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">setPostal</span><span class="p">(</span><span class="mi">49418</span><span class="p">)</span>
<span class="p">);</span>

<span class="nv">$repository</span><span class="o">-&gt;</span><span class="na">persist</span><span class="p">(</span><span class="nv">$customer</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">flush</span><span class="p">();</span>
</pre></div>
</section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        7/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide">
                <div class="inner">
                    
                    <header><h1>The Doctrine Project</h1></header>
                    
                    
                    <section><p>Doctrine is a set of libraries:</p>
<ul>
<li><strong>DBAL</strong>: Database Abstract Layer</li>
<li><strong>ORM</strong>: Object Relational Mapper</li>
</ul></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        8/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide">
                <div class="inner">
                    
                    <header><h1>The Doctrine Project</h1></header>
                    
                    
                    <section><p>Doctrine is a set of libraries:</p>
<ul>
<li><strong>DBAL</strong>: Database Abstract Layer</li>
<li><strong>ORM</strong>: Object Relational Mapper</li>
<li><strong>ODM</strong>: Object Document Mapper (Mongo, Couch)</li>
<li><strong>Migrations</strong>: Database Versioning</li>
</ul></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        9/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM</h1></header>
                    
                    
                    <section><p>Doctrine ORM is a Data Mapper.</p>
<p>Essentially, this allows you to map Plain Old PHP Objects (POPOs) to database tables.</p>
<p>It's a way for returning, building, and saving POPOs, rather than working with queries and data directly.</p></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        10/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: Entities</h1></header>
                    
                    
                    <section><p>You start with a PHP object, called an Entity, which is a pure PHP object:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Customer</span> <span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$id</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nv">$name</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getId</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setId</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">id</span> <span class="o">=</span> <span class="nv">$id</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getName</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setName</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        11/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: Mappings</h1></header>
                    
                    
                    <section><p>Which you then map to a database (Yaml):</p>
<div class="highlight"><pre>Customer:
    type: entity
    table: customers
    id:
        id:
            column: customer_id
    fields:
        name:
            length: 100
</pre></div>
</section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        12/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: Mappings</h1></header>
                    
                    
                    <section><p>Which you then map to a database (XML):</p>
<div class="highlight"><pre><span class="nt">&lt;doctrine-mapping&gt;</span>
  <span class="nt">&lt;entity</span> <span class="na">name=</span><span class="s">&quot;Customer&quot;</span> <span class="na">table=</span><span class="s">&quot;customers&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;integer&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span> <span class="na">length=</span><span class="s">&quot;100&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/entity&gt;</span>
<span class="nt">&lt;/doctrine-mapping&gt;</span>
</pre></div>
</section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        13/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: Mappings</h1></header>
                    
                    
                    <section><p>Which you then map to a database (Annotations):</p>
<div class="highlight"><pre><span class="sd">/**</span>
<span class="sd"> * @Entity</span>
<span class="sd"> * @Table(name=&quot;customers&quot;)</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">Customer</span> <span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Id</span>
<span class="sd">     * @Column(type=&quot;integer&quot;)</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$id</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @Column(length=100)</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$name</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        14/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: Mappings</h1></header>
                    
                    
                    <section><p><img alt="" src="src/doctrine-orm/images/aint-nobody-got-time-for-that.gif" /></p></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        15/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: EntityManager</h1></header>
                    
                    
                    <section><p>Once you have your Entities and Mappings in place, you can use Doctrine's <code>EntityManager</code> to instantiate Repositories for your entities and get data!</p>
<div class="highlight"><pre><span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$entityManager</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">);</span>
</pre></div>

<p>Magic! <code>$customer</code> is now a <code>Customer</code>, whose <code>$id</code> is 14!</p></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        16/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: EntityManager</h1></header>
                    
                    
                    <section><p>All database operations can now be done through the EntityManager by simply calling repository methods to get existing
data, or by passing Entities to create or update them.</p>
<p><strong>Now you're working with objects!</strong></p></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        17/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: Associations</h1></header>
                    
                    
                    <section><p>Associations can be mapped (Yaml):</p>
<div class="highlight"><pre>Order:
  type: entity
  table: orders
  id:
    id:
      column: order_id
  manyToOne:
    channel:
      targetEntity: Customer
      joinColumn:
        name: customer_id
        referencedColumnName: customer_id
</pre></div>
</section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        18/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: Associations</h1></header>
                    
                    
                    <section><p>Associations can be mapped (PHP):</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Order</span> <span class="p">{</span>
   <span class="k">protected</span> <span class="nv">$customer</span><span class="p">;</span>

   <span class="k">public</span> <span class="k">function</span> <span class="nf">setCustomer</span><span class="p">(</span><span class="nv">$customer</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">customer</span> <span class="o">=</span> <span class="nv">$customer</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">public</span> <span class="k">function</span> <span class="nf">getCustomer</span><span class="p">()</span>
   <span class="p">{</span>
      <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">customer</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        19/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: Associations</h1></header>
                    
                    
                    <section><p>Associations can be used fluently:</p>
<div class="highlight"><pre><span class="nv">$order</span> <span class="o">=</span> <span class="nv">$em</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">,</span> <span class="mi">101</span><span class="p">);</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$order</span><span class="o">-&gt;</span><span class="na">getCustomer</span><span class="p">();</span>

<span class="k">echo</span> <span class="s1">&#39;Order Number: &#39;</span> <span class="o">.</span> <span class="nv">$order</span><span class="o">-&gt;</span><span class="na">getNumber</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;&lt;br&gt;&#39;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s1">&#39;Customer Name: &#39;</span> <span class="o">.</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;&lt;br&gt;&#39;</span><span class="p">;</span>
</pre></div>

<p>Doctrine takes care of loading the data on demand (lazy loading, unless otherwise specified in the mapping file).</p></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        20/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: Associations</h1></header>
                    
                    
                    <section><p>Doctrine handles all relationship types:</p>
<div class="highlight"><pre><span class="c1">// M-1:</span>
<span class="nv">$order</span> <span class="o">=</span> <span class="nv">$em</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">,</span> <span class="mi">101</span><span class="p">);</span>
<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$order</span><span class="o">-&gt;</span><span class="na">getCustomer</span><span class="p">();</span>

<span class="c1">// Doctrine handles all relationship types</span>
<span class="c1">// 1-M:</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">getOrders</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$order</span><span class="p">)</span> <span class="p">{}</span>

<span class="c1">// M-M (through linking tables):</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">getContacts</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$contact</span><span class="p">)</span> <span class="p">{}</span>

<span class="c1">// 1-1:</span>
<span class="nv">$billing</span> <span class="o">=</span> <span class="nv">$customer</span><span class="o">-&gt;</span><span class="na">getBillingInfo</span><span class="p">();</span>
</pre></div>
</section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        21/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: Repositories</h1></header>
                    
                    
                    <section><p>Doctrine generates repositories for making interacting with data easier:</p>
<div class="highlight"><pre><span class="nv">$repository</span> <span class="o">=</span> <span class="nv">$em</span><span class="o">-&gt;</span><span class="na">getRepository</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">);</span>

<span class="nv">$customer</span> <span class="o">=</span> <span class="nv">$repository</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span>
<span class="nv">$customers</span> <span class="o">=</span> <span class="nv">$repository</span><span class="o">-&gt;</span><span class="na">findBy</span><span class="p">([</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Retail&#39;</span><span class="p">]);</span>
<span class="nv">$customers</span> <span class="o">=</span> <span class="nv">$repository</span><span class="o">-&gt;</span><span class="na">findAll</span><span class="p">();</span>
</pre></div>
</section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        22/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: DQL</h1></header>
                    
                    
                    <section><p>Doctrine provides Doctrine Query Language (DQL) to query entities:</p>
<div class="highlight"><pre><span class="nv">$builder</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">entityManager</span><span class="o">-&gt;</span><span class="na">createQueryBuilder</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">&#39;customer&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">,</span> <span class="s1">&#39;customer&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">join</span><span class="p">(</span><span class="s1">&#39;billing&#39;</span><span class="p">,</span> <span class="s1">&#39;billing&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;customer.id = :customerId&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setParameter</span><span class="p">(</span><span class="s1">&#39;customerId&#39;</span><span class="p">,</span> <span class="nv">$customerId</span><span class="p">);</span>
</pre></div>
</section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        23/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: Custom Types</h1></header>
                    
                    
                    <section><p>Doctrine allows for adding custom types, which allows you to implement unsupported features of your database system
or invent crazy things that don't really exist (think Value Objects).</p></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        24/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide has_code">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: Creating Your Database</h1></header>
                    
                    
                    <section><p>You can even use your mapping files to create your database for you using the command line tool:</p>
<div class="highlight"><pre>$ vendor/bin/doctrine orm:schema-tool:create
$ vendor/bin/doctrine orm:schema-tool:update
</pre></div>
</section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        25/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide">
                <div class="inner">
                    
                    <header><h1>Doctrine ORM: Integrations</h1></header>
                    
                    
                    <section><p>Several packages exist to allow easy integration of Doctrine into other frameworks:</p>
<ul>
<li><strong>Symfony</strong>: Configured out of the box</li>
<li><strong>Zend Framework 2</strong>: Use the doctrine-module and doctrine-orm-module from Doctrine's GitHub.</li>
<li><strong>Laravel 4</strong>: Available via the doctrine bundle</li>
<li><strong>Silex</strong>: Supported through 3rd party bundles</li>
</ul></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        26/27
                    </aside>
                </footer>
            </div>
        </div>
        
        <!-- slide source: src/doctrine-orm/slides.md -->
        <div class="slide-wrapper">
            <div class="slide">
                <div class="inner">
                    
                    <header><h1>Doctrine: Learn More</h1></header>
                    
                    
                    <section><p>http://www.doctrine-project.org/</p></section>
                    
                </div>
                <div class="presenter_notes">
                    <header><h1>Notes</h1></header>
                    <section>
                        
                    </section>
                </div>
                <footer>
                    
                    <aside class="source">
                        Source: <a href="src/doctrine-orm/slides.md">src/doctrine-orm/slides.md</a>
                    </aside>
                    
                    <aside class="page_number">
                        27/27
                    </aside>
                </footer>
            </div>
        </div>
        
    </div>
</div>


<div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
        <caption>Table of Contents</caption>
        
        <tr id="toc-row-1">
            <th><a href="#slide1">Doctrine</a></th>
            <td><a href="#slide1">1</a></td>
        </tr>
        
        
        <tr id="toc-row-2">
            <th><a href="#slide2">Kristopher Wilson</a></th>
            <td><a href="#slide2">2</a></td>
        </tr>
        
        
        <tr id="toc-row-3">
            <th><a href="#slide3">Queries Kind of Suck</a></th>
            <td><a href="#slide3">3</a></td>
        </tr>
        
        
        <tr id="toc-row-4">
            <th><a href="#slide4">Queries Kind of Suck</a></th>
            <td><a href="#slide4">4</a></td>
        </tr>
        
        
        <tr id="toc-row-5">
            <th><a href="#slide5">Some People Kind of Suck at Queries</a></th>
            <td><a href="#slide5">5</a></td>
        </tr>
        
        
        <tr id="toc-row-6">
            <th><a href="#slide6">Personally, I Like Objects</a></th>
            <td><a href="#slide6">6</a></td>
        </tr>
        
        
        <tr id="toc-row-7">
            <th><a href="#slide7">Personally, I Like Objects</a></th>
            <td><a href="#slide7">7</a></td>
        </tr>
        
        
        <tr id="toc-row-8">
            <th><a href="#slide8">The Doctrine Project</a></th>
            <td><a href="#slide8">8</a></td>
        </tr>
        
        
        <tr id="toc-row-9">
            <th><a href="#slide9">The Doctrine Project</a></th>
            <td><a href="#slide9">9</a></td>
        </tr>
        
        
        <tr id="toc-row-10">
            <th><a href="#slide10">Doctrine ORM</a></th>
            <td><a href="#slide10">10</a></td>
        </tr>
        
        
        <tr id="toc-row-11">
            <th><a href="#slide11">Doctrine ORM: Entities</a></th>
            <td><a href="#slide11">11</a></td>
        </tr>
        
        
        <tr id="toc-row-12">
            <th><a href="#slide12">Doctrine ORM: Mappings</a></th>
            <td><a href="#slide12">12</a></td>
        </tr>
        
        
        <tr id="toc-row-13">
            <th><a href="#slide13">Doctrine ORM: Mappings</a></th>
            <td><a href="#slide13">13</a></td>
        </tr>
        
        
        <tr id="toc-row-14">
            <th><a href="#slide14">Doctrine ORM: Mappings</a></th>
            <td><a href="#slide14">14</a></td>
        </tr>
        
        
        <tr id="toc-row-15">
            <th><a href="#slide15">Doctrine ORM: Mappings</a></th>
            <td><a href="#slide15">15</a></td>
        </tr>
        
        
        <tr id="toc-row-16">
            <th><a href="#slide16">Doctrine ORM: EntityManager</a></th>
            <td><a href="#slide16">16</a></td>
        </tr>
        
        
        <tr id="toc-row-17">
            <th><a href="#slide17">Doctrine ORM: EntityManager</a></th>
            <td><a href="#slide17">17</a></td>
        </tr>
        
        
        <tr id="toc-row-18">
            <th><a href="#slide18">Doctrine ORM: Associations</a></th>
            <td><a href="#slide18">18</a></td>
        </tr>
        
        
        <tr id="toc-row-19">
            <th><a href="#slide19">Doctrine ORM: Associations</a></th>
            <td><a href="#slide19">19</a></td>
        </tr>
        
        
        <tr id="toc-row-20">
            <th><a href="#slide20">Doctrine ORM: Associations</a></th>
            <td><a href="#slide20">20</a></td>
        </tr>
        
        
        <tr id="toc-row-21">
            <th><a href="#slide21">Doctrine ORM: Associations</a></th>
            <td><a href="#slide21">21</a></td>
        </tr>
        
        
        <tr id="toc-row-22">
            <th><a href="#slide22">Doctrine ORM: Repositories</a></th>
            <td><a href="#slide22">22</a></td>
        </tr>
        
        
        <tr id="toc-row-23">
            <th><a href="#slide23">Doctrine ORM: DQL</a></th>
            <td><a href="#slide23">23</a></td>
        </tr>
        
        
        <tr id="toc-row-24">
            <th><a href="#slide24">Doctrine ORM: Custom Types</a></th>
            <td><a href="#slide24">24</a></td>
        </tr>
        
        
        <tr id="toc-row-25">
            <th><a href="#slide25">Doctrine ORM: Creating Your Database</a></th>
            <td><a href="#slide25">25</a></td>
        </tr>
        
        
        <tr id="toc-row-26">
            <th><a href="#slide26">Doctrine ORM: Integrations</a></th>
            <td><a href="#slide26">26</a></td>
        </tr>
        
        
        <tr id="toc-row-27">
            <th><a href="#slide27">Doctrine: Learn More</a></th>
            <td><a href="#slide27">27</a></td>
        </tr>
        
        
    </table>
</div>

<div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
        <caption>Help</caption>
        <tr>
            <th>Table of contents</th>
            <td>t</td>
        </tr>
        <tr>
            <th>Exposé</th>
            <td>ESC</td>
        </tr>
        <tr>
            <th>Autoscale</th>
            <td>e</td>
        </tr>
        <tr>
            <th>Full screen slides</th>
            <td>f</td>
        </tr>
        <tr>
            <th>Presenter view</th>
            <td>p</td>
        </tr>
        <tr>
            <th>Source files</th>
            <td>s</td>
        </tr>
        <tr>
            <th>Slide numbers</th>
            <td>n</td>
        </tr>
        <tr>
            <th>Blank screen</th>
            <td>b</td>
        </tr>
        <tr>
            <th>Notes</th>
            <td>2</td>
        </tr>
        <tr>
            <th>Help</th>
            <td>h</td>
        </tr>
    </table>
</div>
<script>$().landslide();</script>
</body>
</html>